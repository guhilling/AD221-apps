== Implementing Enterprise Integration Patterns

=== Transforming XML Data by Using JAXB

[source,xml]
----
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-xml-jaxb</artifactId>
</dependency>
----

=== Transforming JSON Data by Using Jackson

[source,xml]
----
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-jackson</artifactId>
</dependency>
----

=== Transforming Directly Between XML and JSON Data

_xom_ is deprecated, we can use _xj_ instead:

[source,xml]
----
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-xj</artifactId>
</dependency>
----

Use in Java Code:

[source,java]
----
from("direct:marshal")
    .to("xj:identity?transformDirection=XML2JSON")
    .to("direct:json");
----

=== Guided Exercise: Transforming and Filtering Messages

Dependencies to add:

[source,xml]
----
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-xj</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-xml-jaxb</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.camel.quarkus</groupId>
    <artifactId>camel-quarkus-jsonpath</artifactId>
</dependency>
----

The contents of _TransformRouteBuilder_ should look like:

[source,java]
----
from("activemq:queue:orderInput")
    .routeId("Transforming Orders")
    .marshal().jaxb()
    .log("XML Body: ${body}")
    .to("xj:identity?transformDirection=XML2JSON")
    .log("JSON Body: ${body}")
    .filter().jsonpath("$[?(@.delivered !='true')]")
    .wireTap("direct:jsonOrderLog")
.to("mock:fulfillmentSystem");
----

=== Guided Exercise: Transforming Messages with Custom Type Converters

Necessary Changes:

- _CommandConfigurationConverter_ needs a public default constructor.
- The _TypeConverter_ file isn't needed anymore.

